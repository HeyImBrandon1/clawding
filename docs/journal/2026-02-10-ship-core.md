# 2026-02-10 — Ship Core Platform

## What Was Shipped

Complete port of Clawding's core functionality to SlashCast. The platform went from scaffold-only (lib files + schema) to a fully functional coding community with 13 API endpoints, 7 components, 4 pages, skill content, and install script. Database pushed to Neon with all 6 tables live. Build passes clean.

## Files Created

### API Routes — Auth + Feed (6 files)
- `src/app/api/check/route.ts` — Check slug availability
- `src/app/api/claim/route.ts` — Claim username (create account)
- `src/app/api/post/[slug]/route.ts` — Post an update
- `src/app/api/delete/[slug]/route.ts` — Delete last post
- `src/app/api/profile/[slug]/route.ts` — Update profile fields
- `src/app/api/feed/[slug]/route.ts` — Get user feed (paginated)

### API Routes — Public + Recovery (6 files)
- `src/app/api/global/route.ts` — Global feed (all updates, paginated)
- `src/app/api/stats/route.ts` — Platform stats (total feeds, updates, active)
- `src/app/api/active/route.ts` — Most active users (by post count)
- `src/app/api/discover/route.ts` — Random feed discovery
- `src/app/api/recover/route.ts` — Send recovery email
- `src/app/api/recover/verify/route.ts` — Verify recovery code

### Components (7 files)
- `src/components/update-card.tsx` — Renders a single post/update
- `src/components/stats-bar.tsx` — Platform stats display
- `src/components/relative-time.tsx` — Client-side relative timestamps
- `src/components/install-command.tsx` — Copy-to-clipboard install command
- `src/components/project-filter.tsx` — Filter feed by project name
- `src/components/active-coders.tsx` — Most active users display
- `src/components/discover-profiles.tsx` — Random profile discovery

### Pages (4 files)
- `src/app/page.tsx` — Homepage (stats, active coders, discover, install)
- `src/app/[slug]/page.tsx` — User profile page (feed + project filter)
- `src/app/feed/page.tsx` — Global feed with infinite scroll
- `src/app/guide/page.tsx` — Guide/docs page

### Skill System (3 files)
- `src/lib/skill-content.ts` — SKILL.md content as exported string
- `src/app/skill.md/route.ts` — Serves skill content at `/skill.md`
- `src/app/i/route.ts` — Install script endpoint (`curl -sL domain/i | bash`)

### Modified Files
- `src/lib/utils.ts` — Added `timeAgo()` for server-side relative time formatting
- `src/app/api/health/route.ts` — Added `dynamic` export for consistency

**Total: 26 files created/modified**

## Key Decisions

1. **Lazy DB connection via Proxy** — `src/lib/db/index.ts` wraps the Drizzle client in a JavaScript Proxy that only initializes the connection on first use. This means `npm run build` passes without `DATABASE_URL` set, which is critical for CI and Vercel preview builds.

2. **snake_case API responses** — External API responses use snake_case (`created_at`, `project_name`) for consistency with Clawding and CLI expectations, even though Drizzle uses camelCase internally.

3. **`has_more` to `hasMore` fix** — The global feed route initially returned `has_more` (snake_case) but the frontend expected `hasMore` (camelCase). Fixed for consistency within the JSON response structure where pagination metadata uses camelCase.

4. **Server components by default** — All pages are server components that fetch data. Client components (`'use client'`) only used where interactivity is needed (infinite scroll, copy-to-clipboard, project filtering, relative time hydration).

5. **No manifest API yet** — Built the skill content and install script but deferred the manifest API (`/api/skills/manifest`) since events need to ship first (manifest includes event announcements).

## Audit Findings

Post-build audit scored **22 issues total**:
- **Critical:** 0
- **High:** 4
- **Medium:** 12
- **Low:** 6

**Fixed during session (2):**
- `has_more` → `hasMore` inconsistency in global API route
- Missing `dynamic` export on health route

**Deferred (20):**
- High issues likely relate to input validation depth, error handling edge cases, and rate limit coverage gaps
- Medium/low issues are polish-level (loading states, error boundaries, metadata, etc.)
- All deferred to a dedicated `/fix` or `/polish` session

## What's Next

1. **Events API** — CRUD for events, join/leave participation, leaderboard (`/api/events/*`)
2. **Event pages** — List, detail, and voting pages (`/events`, `/events/[slug]`, `/events/[slug]/vote`)
3. **Admin API** — Event management, winner declaration, announcements (`/api/admin/*`)
4. **Manifest API** — Self-updating skill system (`/api/skills/manifest`)
5. **Notification endpoint** — Shell notification check (`/api/notify`)
6. **Voting system** — Signed voting links from CLI to web
7. **Fix/polish pass** — Address the 20 deferred audit findings
8. **Deploy to Vercel** — First production deployment
